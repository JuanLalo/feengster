<div id="row">
  <div class="col-sm-12 col-lg-12">
    <div class="panel panel-bd lobidrag ">
      <div class="panel-heading">
        <div class="panel-title ">
          <h4>
            <p id="tipo">Registro de Logins</p>
          </h4>
        </div>
      </div>

      <div class="panel-body">


        <form id="fg_users_all" class="form-horizontal" data-toggle="validator" role="form">
          <div class="row">
            <center>
              <img width="160px" height="160px" src="../assets/dist/img/perfil.png" class="img-circle" id="img">
            </center>
            <br>
          </div>
          <div class="row">

            <div class="col-lg-12">
              <div class="col-lg-1"></div>
              <div class="col-lg-5">

                <div class="form-group has-feedback">
                  <label for="username" class="control-label">Nombre de Usuario</label>
                  <div class="input-group">
                    <span class="input-group-addon">@</span>
                    <input id="username" name="username" type="text" maxlength="15" class="form-control" minlength="3"
                      placeholder="juanLalo" required>
                  </div>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors">Debe ser un nombre de usuario unico</div>
                </div>


                <div class="form-group has-feedback">
                  <label for="name" class="control-label">Nombre</label>
                  <div class="input-group">
                    <div class="input-group-addon">
                      <i class="fa fa-address-card-o"></i>
                    </div>
                    <input id="name" name="name" type="text" minlength="3" maxlength="30" class="form-control" required>
                  </div>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors"></div>
                </div>

                <div class="form-group has-feedback">
                  <label for="surnames" class="control-label">Apellidos</label>
                  <div class="input-group">
                    <div class="input-group-addon">
                      <i class="fa fa-address-card-o"></i>
                    </div>
                    <input id="surnames" name="surnames" type="text" min="5" maxlength="40" required="required" class="form-control">
                  </div>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors"></div>
                </div>

                <div class="form-group has-feedback">
                  <label for="phone" class="control-label">Tel. Celular</label>
                  <div class="input-group">
                    <div class="input-group-addon">
                      <i class="fa fa-phone-square"></i>
                    </div>
                    <input id="phone" name="phone" type="text" class="phone_us form-control" maxlength="10" minlength="9"
                      required>
                  </div>
                  <small class="text-muted">MX +52 <code>lada + número (7 dígitos)</code></small>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors">Telefono celular</div>
                </div>


              </div>
              <div class="col-lg-1"></div>
              <div class="col-lg-5">

                <div class="form-group has-feedback">
                  <label for="email" class="control-label">Email</label>
                  <div class="input-group">
                    <div class="input-group-addon">
                      <i class="fa fa-envelope-o"></i>
                    </div>
                    <input id="email" name="email" placeholder="ejemplo@ejemplo.com" type="email" minlength="10"
                      maxlength="40" class="form-control" required>
                  </div>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors"></div>
                </div>

                <div class="form-group has-feedback">
                  <label for="password" class="control-label">Password</label>
                  <div class="input-group">
                    <div class="input-group-addon">
                      <i class="fa fa-lock"></i>
                    </div>
                    <input id="password" name="password" type="password" minlength="6" maxlength="30" class="form-control"
                      required="required">
                  </div>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors">Asugurate de que la recordarás.</div>
                </div>

                <div class="form-group has-feedback">
                  <label for="birthdate" class="control-label">Fecha de nacimiento</label>
                  <div class="input-group">
                    <div class="input-group-addon">
                      <i class="fa fa-birthday-cake"></i>
                    </div>
                    <input type="date" class="form-control" id="birthdate" name="birthdate" minlength="10" maxlength="10"
                      max="2008-12-31" min="1940-12-31">
                  </div>
                  <small class="text-muted">Formato :<code>dd/mm/aaaa</code></small>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors">Gracias, lo necesitamos para brindarte un mejor servicio.</div>
                </div>

                <div class="form-group has-feedback">
                  <label for="name" class="control-label">Estatus</label>
                  <select data-error="¡Necesitamos un estatus!" name="status" id="status" aria-describedby="statusHelpBlock"
                    class="select form-control" required="required">
                    <option></option>
                  </select>
                  <span id="HelpBlock" class="help-block">Si no se activa, no podrá ingresar este usuario.</span>
                  <div class="help-block with-errors"></div>

                </div>
              </div>
            </div>

          </div>
        </form>


      </div>
    </div>
  </div>

</div>



<script src="../assets/plugins/validator/validator.min.js" type="text/javascript"></script>



<script>
  /**
   * 
   *  Se inicializa formulario
   *  Asegurate que el nombre nombre del formulario sea unico id="Nombre"
   * 
   * **/

  $(document).ready(function () {

    const user = {

      idForm: '#fg_users_all',

      changeValueInputs: function () {

        return true
      }
    }


    let id = $f.forms.new({

      rules: {
        show: true,
        new: true,
        change: true,
        delete: true
      },

      reports: {
        pdf: true,
        excel: true,
        print: true,
        copy: false,
        csv: false
      },

      optionalData: {
        0: {
          name: 'updated_at',
          value: $f.app.getDateTime,
          function_: true,
        }
      },

      columns: [{
          "data": "id",
          "title": "ID USER"
        },
        {
          "data": "username",
          "title": "NOMBRE DE USUARIO"
        },
        {
          "data": "name",
          "title": "NOMBRE"
        },
        {
          "data": "surnames",
          "title": "APELLIDOS"
        },
        {
          "data": "phone",
          "title": "TEL"
        },
        {
          "data": "email",
          "title": "EMAIL"
        },
        {
          "data": "birthdate",
          "title": "BIRTHDATE"
        },
        {
          "data": "platform",
          "title": "PLATFORM"
        },
        {
          "data": "created_at",
          "title": "DESDE"
        },
        {
          "data": "updated_at",
          "title": "MODIFICADO"
        },
        {
          "data": "status",
          "title": "ESTATUS"
        }
      ],
      
      tableData: [],

      dropdown: {
        0: {
          id: 'status',
          view: 'status_1_0'
        },
        1: {
          id: 'android',
          view: 'yes_no_binary'
        },
        2: {
          id: 'print',
          view: 'yes_no_binary'
        },
        3: {
          id: 'id_module',
          view: 'modules_select_option'
        }
      },


      events: {
        onEdit: undefined,
        beforeSave:  function(){
           alert('se evitó')
             return false
            },
        afterSave: undefined,
        beforeChange:   function(){
           alert('se evitó')
             return 
            },
        afterChange: undefined,
        onDelete: undefined,
        beforeDelete: undefined,
        afterDelete: undefined,
        onNew: undefined,
      }
    })


    user.imgDefaul = '../assets/dist/img/perfil.png'
    user.img = '' 
    $(user.idForm + ' .phone_us').mask('000-000-00-00')
    $(user.idForm + ' #username').mask('@SSSSSSSSSSSSSSSSSSSSS')

    

    user.onNew = function ()
     {
      $(user.idForm + ' #img').attr("src", user.imgDefaul)
     }

    user.onEdit = function () 
     {

      let formData = $f.forms.get.formData(id)
      user.img = formData.img
      
      if(formData.img == '' || formData.img == null)
        {
           user.img = user.imgDefaul
        }

      $(user.idForm + ' #img').attr('src', user.img )
     
     }


    // Update Form events
    $f.forms.events.onNew(id, user.onNew)
    $f.forms.events.onEdit(id, user.onEdit)


  })
</script>