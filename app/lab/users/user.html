<div id="row">
  <div class="col-sm-12 col-lg-12">
    <div class="panel panel-bd lobidrag ">
      <div class="panel-heading">
        <div class="panel-title ">
          <h4>
            <p id="tipo">Registro de Logins</p>
          </h4>
        </div>
      </div>

      <div class="panel-body">


        <form id="fg_ml_users_all" class="form-horizontal fg_ml_users_all f1" data-toggle="validator" role="form" >

        <div class="col-lg-12 ">  

          <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12  text-center"> 
          <div class="f1-steps">
              <div class="f1-progress">
                  <div class="f1-progress-line" data-now-value="16.66" data-number-of-steps="4" style="width: 10%;"></div>
              </div>
              <div class="f1-step active">
                  <div class="f1-step-icon"><i class="fa fa-user"></i></div>
                  <p>Cuenta</p>
              </div>
              <div class="f1-step">
                  <div class="f1-step-icon"><i class="fa fa-address-card"></i></div>
                  <p>Empresa</p>
              </div>
              <div class="f1-step">
                  <div class="f1-step-icon"><i class="fa fa-laptop"></i></div>
                  <p>App</p>
              </div>
              <div class="f1-step">
                  <div class="f1-step-icon"><i class="fa fa-child"></i></div>
                  <p>Rol</p>
              </div>
          </div>
          </div>
        </div>

          <fieldset  style="display: block;">
             
              <div class="row">
                  <div id="step-1"> 
                  <center>
                    <img width="160px" height="160px" src="../assets/dist/img/perfil.png" class="img-circle" id="img">
                  </center>
                  <br>
               
                <div class="row">
      
                  <div class="col-lg-12">
                    <div class="col-lg-1"></div>
                    <div class="col-lg-5">
      
                      <div class="form-group has-feedback">
                        <label for="username" class="control-label">Nombre de Usuario</label>
                        <div class="input-group">
                          <span class="input-group-addon">@</span>
                          <input id="username" name="username" type="text" maxlength="15" class="form-control" minlength="3"
                            placeholder="juanLalo" required>
                        </div>
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors">Debe ser un nombre de usuario unico</div>
                      </div>
      
      
                      <div class="form-group has-feedback">
                        <label for="name" class="control-label">Nombre</label>
                        <div class="input-group">
                          <div class="input-group-addon">
                            <i class="fa fa-address-card-o"></i>
                          </div>
                          <input id="name" name="name" type="text" minlength="3" maxlength="30" class="form-control" required>
                        </div>
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                      </div>
      
                      <div class="form-group has-feedback">
                        <label for="surnames" class="control-label">Apellidos</label>
                        <div class="input-group">
                          <div class="input-group-addon">
                            <i class="fa fa-address-card-o"></i>
                          </div>
                          <input id="surnames" name="surnames" type="text" min="5" maxlength="40" required="required" class="form-control">
                        </div>
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                      </div>
      
                      <div class="form-group has-feedback">
                        <label for="phone" class="control-label">Tel. Celular</label>
                        <div class="input-group">
                          <div class="input-group-addon">
                            <i class="fa fa-phone-square"></i>
                          </div>
                          <input id="phone" name="phone" type="text" class="phone_us form-control" maxlength="10" minlength="9"
                            required>
                        </div>
                        <small class="text-muted">MX +52 <code>lada + número (7 dígitos)</code></small>
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors">Telefono celular</div>
                      </div>
      
      
                    </div>
                    <div class="col-lg-1"></div>
                    <div class="col-lg-5">
      
                      <div class="form-group has-feedback">
                        <label for="email" class="control-label">Email</label>
                        <div class="input-group">
                          <div class="input-group-addon">
                            <i class="fa fa-envelope-o"></i>
                          </div>
                          <input id="email" name="email" placeholder="ejemplo@ejemplo.com" type="email" minlength="10"
                            maxlength="40" class="form-control" required>
                        </div>
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors"></div>
                      </div>
      
                      <div class="form-group has-feedback">
                        <label for="password" class="control-label">Password</label>
                        <div class="input-group">
                          <div class="input-group-addon">
                            <i class="fa fa-lock"></i>
                          </div>
                          <input id="password" name="password" type="password" minlength="6" maxlength="30" class="form-control"
                            required="required">
                        </div>
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors">Asugurate de que la recordarás.</div>
                      </div>
      
                      <div class="form-group has-feedback">
                        <label for="birthdate" class="control-label">Fecha de nacimiento</label>
                        <div class="input-group">
                          <div class="input-group-addon">
                            <i class="fa fa-birthday-cake"></i>
                          </div>
                          <input type="date" class="form-control" id="birthdate" name="birthdate" minlength="10" maxlength="10"
                            max="2008-12-31" min="1940-12-31">
                        </div>
                        <small class="text-muted">Formato :<code>dd/mm/aaaa</code></small>
                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                        <div class="help-block with-errors">Gracias, lo necesitamos para brindarte un mejor servicio.</div>
                      </div>
      
                      <div class="form-group has-feedback">
                        <label for="name" class="control-label">Estatus</label>
                        <select data-error="¡Necesitamos un estatus!" name="status" id="status" aria-describedby="statusHelpBlock"
                          class="select form-control" required="required">
                          <option></option>
                        </select>
                        <span id="HelpBlock" class="help-block">Si no se activa, no podrá ingresar este usuario.</span>
                        <div class="help-block with-errors"></div>
      
                      </div>
                    </div>
                  </div>
      
                </div>
              <div class="f1-buttons">
                  <button  type="button" class="btn btn-labeled btn-success m-b-5 submit btn-next"><span class="btn-label"><i class="glyphicon glyphicon-arrow-right"></i></span>
                    Siguiente
                </button>
              </div>
            </div>
          </div>
          </fieldset>
       
          <fieldset>
              <div class="row">
                  <div id="step-2"> 
                      <div class="col-lg-12">
                          <div class="col-lg-1"></div>
                          <div class="col-lg-5">
                      <div class="form-group has-feedback">
                          <label for="id_company" class="control-label">Empresa a la que pertenece</label>
                          <select  name="id_company" id="id_company" aria-describedby="statusHelpBlock"
                            class="select form-control" >
                            <option></option>
                          </select>
                          <span id="HelpBlock" class="help-block">Si no se selecciona una empresa debe agragar una nueva y daremos por hecho que este usuario será administrador principal.</span>
                          <div class="help-block with-errors"></div>
                        </div>
                      </div>
                    </div>

              <div class="f1-buttons">
                  <button  type="button" class="btn btn-previous btn-labeled  m-b-5 submit "><span class="btn-label"><i class="glyphicon glyphicon-arrow-left"></i></span>
                    Anterior
                  </button>
                  <button  type="button" class="btn btn-labeled btn-success m-b-5 submit btn-next"><span class="btn-label"><i class="glyphicon glyphicon-arrow-right"></i></span>
                    Siguiente
                </button>
              </div>
              </div>
              </div>
          </fieldset>
          
          <fieldset>
              <div class="row">
                  <div id="step-3"> 
                      <div class="col-lg-12">
                          <div class="col-lg-1"></div>
                          <div class="col-lg-5">
                      <div class="form-group has-feedback">
                          <label for="app_id" class="control-label">Aplicación a la que se le dará acceso</label>
                          <select data-error="¡Necesitamos saber cual será la aplicación que usará este usuario!"  name="app_id" id="app_id" aria-describedby="statusHelpBlock"
                            class="select form-control" required>
                            <option></option>
                          </select>
                          <span id="HelpBlock" class="help-block"> - Si deseas darle acceso a otra aplicación lo puedes hacer más tarde en el menú de [usuario - apps].</span>
                          <div class="help-block with-errors"></div>
                        </div>
                      </div>
                    </div>
                    <div class="f1-buttons">
                        <button  type="button" class="btn btn-previous btn-labeled  m-b-5 submit "><span class="btn-label"><i class="glyphicon glyphicon-arrow-left"></i></span>
                          Anterior
                        </button>
                        <button  type="button" class="btn btn-labeled btn-success m-b-5 submit btn-next"><span class="btn-label"><i class="glyphicon glyphicon-arrow-right"></i></span>
                          Siguiente
                      </button>
                    </div>
             
            </div>
          </div>
          </fieldset>

          <fieldset>
              <div class="row">
                  <div id="step-4"> 
                      <div class="col-lg-12">
                          <div class="col-lg-1"></div>
                          <div class="col-lg-5">
                      <div class="form-group has-feedback">
                          <label for="id_cat_user" class="control-label">¿Cúal será su rol?</label>
                          <select  name="id_cat_user" id="id_cat_user" aria-describedby="statusHelpBlock"
                            class="select form-control" required>
                            <option></option>
                          </select>
                          <span id="HelpBlock" class="help-block">La aplicación tendrá diferentes funciones de acuerdo al tipo de rol.</span>
                          <div class="help-block with-errors"></div>
                        </div>
                      </div>
                    </div>

              <div class="f1-buttons">
                  <button  type="button" class="btn btn-previous btn-labeled  m-b-5 submit "><span class="btn-label"><i class="glyphicon glyphicon-arrow-left"></i></span>
                    Anterior
                  </button>
                  <button  type="submit" class="btn btn-labeled btn-info m-b-5 submit btn-submit"><span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>
                    Guardar
                </button>
              </div>
            </div>
          </div>
          </fieldset>
        
        </div>

      </form>

      </div>
    </div>
  </div>

</div>



<script src="../assets/plugins/validator/validator.min.js" type="text/javascript"></script>



<script>
  /**
   * 
   *  Se inicializa formulario
   *  Asegurate que el nombre nombre del formulario sea unico id="Nombre"
   * 
   * **/

  $(document).ready(function () {

    const user = {

      idForm: '#fg_ml_users_all',

      changeValueInputs: function () {

        return true
      }
    }


    $f.forms.newMultiple({
      info:  
                {
                  name: 'fg_ml_users_all',
                  view: 'all_users_apps_all',
                },

      rules: {
        show: true,
        new: true,
        change: true,
        delete: true
      },
      
      steps:{
        
        0:{
            
          table_code: 'NN1X86VL02X984LDTPRFKBLSUNDMQHXYN7RX29VAIFC5GK85R2Q9SY26E9RT',  
        
          },
        
        1:{
          
          table_code: '3PW4PVWOEQ47E0O1W5PUVHK5PTNJFAU2LG8KS0EQ6D2YACJDZJF8L148JQSE',
          fk: { 0:{name:'user_id', reference: 0 }, 1:{} },
          optionalData: {
                0: {
                      name: 'id_user',
                      value: 2,
                      function_: false,
                   }
              },
          
          },
  
        2:{
          
          table_code: 'KZYIGGOP8SWWJOI8BNYN4AV8AG53SB0UXRR9ROX99707OJCW4OO37IK3I1B5',
          fk: { 0:{name:'user_id', reference: 0 }, 1:{} },
          optionalData: {
                0: {
                      name: 'user_id',
                      value: 2,
                      function_: false,
                   }
              }, 

          },

        3:{
          
          table_code: '41MO8VE2X4K5S6ALVBO4BXDUUGGLBKKUBPDHY4ECA6QSK3K71EI4SC21QAWD',
          fk: { 0:{name:'user_id', reference: 0 }, 1:{} }, 
          optionalData: {
                0: {
                      name: 'id_user',
                      value: 2,
                      function_: false,
                   }
              },
          },
      
        },
      

    
      columns: [{
          "data": "id",
          "title": "ID USER"
        },
        {
          "data": "username",
          "title": "NOMBRE DE USUARIO"
        },
        {
          "data": "name",
          "title": "NOMBRE"
        },
        {
          "data": "surnames",
          "title": "APELLIDOS"
        },
        {
          "data": "phone",
          "title": "TEL"
        },
        {
          "data": "email",
          "title": "EMAIL"
        },
        {
          "data": "birthdate",
          "title": "BIRTHDATE"
        },
        {
          "data": "platform",
          "title": "PLATFORM"
        },
        {
          "data": "created_at",
          "title": "DESDE"
        },
        {
          "data": "updated_at",
          "title": "MODIFICADO"
        },
        {
          "data": "status",
          "title": "ESTATUS"
        }
      ],
      
      tableData: [],

       reports: {
        pdf: true,
        excel: true,
        print: true,
        copy: false,
        csv: false
      },


      dropdown: {
        0: {
          id: 'status',
          view: 'status_1_0'
        },
        1: {
          id: 'id_company',
          view: 'all_company_all_apps'
        },

        2: {
          id: 'app_id',
          view: 'app_select_option_for_new_user'
        },

        3: {
          id: 'id_cat_user',
          view: 'all_user_type_for_app_'
        },
               
        
      },


      events: {
        onEdit: undefined,
        beforeSave:  undefined,
        afterSave: undefined,
        beforeChange:  undefined,
        afterChange: undefined,
        onDelete: undefined,
        beforeDelete: undefined,
        afterDelete: undefined,
        onNew: undefined,
      }
    },
      
      formReady

    )

function formReady(id){


    user.imgDefaul = '../assets/dist/img/perfil.png'
    user.img = '' 
    $(user.idForm + ' .phone_us').mask('000-000-00-00')
    $(user.idForm + ' #username').mask('@SSSSSSSSSSSSSSSSSSSSS')

    

    user.onNew = function ()
     {
      $(user.idForm + ' #img').attr("src", user.imgDefaul)
     }

    user.onEdit = function () 
     {

      let formData = $f.forms.get.formData(id)
      user.img = formData.img
      
      if(formData.img == '' || formData.img == null)
        {
           user.img = user.imgDefaul
        }

      $(user.idForm + ' #img').attr('src', user.img )
     
     }


    // Update Form events
    $f.forms.events.onNew(id, user.onNew)
    $f.forms.events.onEdit(id, user.onEdit)

}


  })
</script>